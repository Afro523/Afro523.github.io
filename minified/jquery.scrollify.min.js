!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(o){return t(o,e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)}("undefined"!=typeof window?window:this,function(e,t,o,n){"use strict";function i(o,n,i,r){if(v===o&&(i=!1),!0===x)return!0;if(d[o]){if(b=!1,i&&z.before(o,p),y=1,k=f[o],!1===I&&v>o&&!1===r&&g[o]&&(y=parseInt(p[o].outerHeight()/S.height()),k=parseInt(f[o])+(p[o].outerHeight()-S.height())),z.updateHash&&z.sectionName&&(!0!==I||0!==o))if(history.pushState)try{history.replaceState(null,null,d[o])}catch(e){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=d[o];if(I&&(z.afterRender(),I=!1),v=o,n)e(z.target).stop().scrollTop(k),i&&z.after(o,p);else{if(E=!0,e().velocity?e(z.target).stop().velocity("scroll",{duration:z.scrollSpeed,easing:z.easing,offset:k,mobileHA:!1}):e(z.target).stop().animate({scrollTop:k},z.scrollSpeed,z.easing),t.location.hash.length&&z.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(e){}e(z.target).promise().done(function(){E=!1,I=!1,i&&z.after(o,p)})}}}function r(e){function t(t){for(var o=0,n=e.slice(Math.max(e.length-t,1)),i=0;i<n.length;i++)o+=n[i];return Math.ceil(o/t)}return t(10)>=t(70)}function s(e,t){for(var o=d.length;o>=0;o--)"string"==typeof e?d[o]===e&&(m=o,i(o,t,!0,!0)):o===e&&(m=o,i(o,t,!0,!0))}var a,c,u,h,l,f=[],d=[],p=[],g=[],m=0,v=0,y=1,w=!1,S=e(t),H=S.scrollTop(),b=!1,E=!1,M=!1,x=!1,T=[],D=(new Date).getTime(),I=!0,N=!1,k=0,L="onwheel"in o?"wheel":o.onmousewheel!==n?"mousewheel":"DOMMouseScroll",z={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},O=function(n){function s(t){e().velocity?e(z.target).stop().velocity("scroll",{duration:z.scrollSpeed,easing:z.easing,offset:t,mobileHA:!1}):e(z.target).stop().animate({scrollTop:t},z.scrollSpeed,z.easing)}function v(t){t&&(H=S.scrollTop());var o=z.section;g=[],z.interstitialSection.length&&(o+=","+z.interstitialSection),!1===z.scrollbars&&(z.overflowScroll=!1),e(o).each(function(t){var o=e(this);z.setHeights?o.is(z.interstitialSection)?g[t]=!1:o.css("height","auto").outerHeight()<S.height()||"hidden"===o.css("overflow")?(o.css({height:S.height()}),g[t]=!1):(o.css({height:o.height()}),z.overflowScroll?g[t]=!0:g[t]=!1):o.outerHeight()<S.height()||!1===z.overflowScroll?g[t]=!1:g[t]=!0}),t&&S.scrollTop(H)}function I(o,n){var r=z.section;z.interstitialSection.length&&(r+=","+z.interstitialSection),f=[],d=[],p=[],e(r).each(function(o){var n=e(this);f[o]=o>0?parseInt(n.offset().top)+z.offset:parseInt(n.offset().top),z.sectionName&&n.data(z.sectionName)?d[o]="#"+n.data(z.sectionName).toString().replace(/ /g,"-"):!1===n.is(z.interstitialSection)?d[o]="#"+(o+1):(d[o]="#",o===e(r).length-1&&o>1&&(f[o]=f[o-1]+(parseInt(e(e(r)[o-1]).outerHeight())-parseInt(e(t).height()))+parseInt(n.outerHeight()))),p[o]=n;try{e(d[o]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(e){}t.location.hash===d[o]&&(m=o,w=!0)}),!0===o&&i(m,!1,!1,!1)}function k(){return!g[m]||!((H=S.scrollTop())>parseInt(f[m]))}function O(){return!g[m]||!((H=S.scrollTop())<parseInt(f[m])+(p[m].outerHeight()-S.height())-28)}N=!0,e.easing.easeOutExpo=function(e,t,o,n,i){return t==i?o+n:n*(1-Math.pow(2,-10*t/i))+o},u={handleMousedown:function(){if(!0===x)return!0;b=!1,M=!1},handleMouseup:function(){if(!0===x)return!0;b=!0,M&&u.calculateNearest(!1,!0)},handleScroll:function(){if(!0===x)return!0;a&&clearTimeout(a),a=setTimeout(function(){if(M=!0,!1===b)return!1;b=!1,u.calculateNearest(!1,!0)},200)},calculateNearest:function(e,t){H=S.scrollTop();for(var o,n=1,r=f.length,s=0,a=Math.abs(f[0]-H);n<r;n++)(o=Math.abs(f[n]-H))<a&&(a=o,s=n);(O()&&s>m||k())&&(m=s,i(s,e,t,!1))},wheelHandler:function(o){if(!0===x)return!0;if(z.standardScrollElements&&(e(o.target).is(z.standardScrollElements)||e(o.target).closest(z.standardScrollElements).length))return!0;g[m]||o.preventDefault();var n=(new Date).getTime(),s=(o=o||t.event).originalEvent.wheelDelta||-o.originalEvent.deltaY||-o.originalEvent.detail,a=Math.max(-1,Math.min(1,s));if(T.length>149&&T.shift(),T.push(Math.abs(s)),n-D>200&&(T=[]),D=n,E)return!1;if(a<0){if(m<f.length-1&&O()){if(!r(T))return!1;o.preventDefault(),E=!0,i(++m,!1,!0,!1)}}else if(a>0&&m>0&&k()){if(!r(T))return!1;o.preventDefault(),E=!0,i(--m,!1,!0,!1)}},keyHandler:function(e){return!0===x||!0!==E&&void(38==e.keyCode||33==e.keyCode?m>0&&k()&&(e.preventDefault(),i(--m,!1,!0,!1)):40!=e.keyCode&&34!=e.keyCode||m<f.length-1&&O()&&(e.preventDefault(),i(++m,!1,!0,!1)))},init:function(){z.scrollbars?(S.on("mousedown",u.handleMousedown),S.on("mouseup",u.handleMouseup),S.on("scroll",u.handleScroll)):e("body").css({overflow:"hidden"}),S.on(L,u.wheelHandler),S.on("keydown",u.keyHandler)}},h={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(!0===x)return!0;if(z.standardScrollElements&&(e(t.target).is(z.standardScrollElements)||e(t.target).closest(z.standardScrollElements).length))return!0;var o;if(void 0!==t&&void 0!==t.touches)switch(o=t.touches[0],t.type){case"touchstart":h.touches.touchstart.y=o.pageY,h.touches.touchmove.y=-1,h.touches.touchstart.x=o.pageX,h.touches.touchmove.x=-1,h.options.timeStamp=(new Date).getTime(),h.touches.touchend=!1;case"touchmove":h.touches.touchmove.y=o.pageY,h.touches.touchmove.x=o.pageX,h.touches.touchstart.y!==h.touches.touchmove.y&&Math.abs(h.touches.touchstart.y-h.touches.touchmove.y)>Math.abs(h.touches.touchstart.x-h.touches.touchmove.x)&&(t.preventDefault(),h.touches.direction="y",h.options.timeStamp+h.options.timeGap<(new Date).getTime()&&0==h.touches.touchend&&(h.touches.touchend=!0,h.touches.touchstart.y>-1&&Math.abs(h.touches.touchmove.y-h.touches.touchstart.y)>h.options.distance&&(h.touches.touchstart.y<h.touches.touchmove.y?h.up():h.down())));break;case"touchend":!1===h.touches[t.type]&&(h.touches[t.type]=!0,h.touches.touchstart.y>-1&&h.touches.touchmove.y>-1&&"y"===h.touches.direction&&(Math.abs(h.touches.touchmove.y-h.touches.touchstart.y)>h.options.distance&&(h.touches.touchstart.y<h.touches.touchmove.y?h.up():h.down()),h.touches.touchstart.y=-1,h.touches.touchstart.x=-1,h.touches.direction="undetermined"))}},down:function(){m<f.length-1&&(O()&&m<f.length-1?i(++m,!1,!0,!1):Math.floor(p[m].height()/S.height())>y?(s(parseInt(f[m])+S.height()*y),y+=1):s(parseInt(f[m])+(p[m].outerHeight()-S.height())))},up:function(){m>=0&&(k()&&m>0?i(--m,!1,!0,!1):y>2?(y-=1,s(parseInt(f[m])+S.height()*y)):(y=1,s(parseInt(f[m]))))},init:function(){o.addEventListener&&z.touchScroll&&(o.addEventListener("touchstart",h.touchHandler,!1),o.addEventListener("touchmove",h.touchHandler,!1),o.addEventListener("touchend",h.touchHandler,!1))}},l={refresh:function(e,t){clearTimeout(c),c=setTimeout(function(){v(!0),I(t),e&&z.afterResize()},400)},handleUpdate:function(){l.refresh(!1,!1)},handleResize:function(){l.refresh(!0,!1)},handleOrientation:function(){l.refresh(!0,!0)}},z=e.extend(z,n),v(!1),I(!1),!0===w?i(m,!1,!0,!0):setTimeout(function(){u.calculateNearest(!0,!1)},200),f.length&&(u.init(),h.init(),S.on("resize",l.handleResize),o.addEventListener&&t.addEventListener("orientationchange",l.handleOrientation,!1))};return O.move=function(t){if(t===n)return!1;t.originalEvent&&(t=e(this).attr("href")),s(t,!1)},O.instantMove=function(e){if(e===n)return!1;s(e,!0)},O.next=function(){m<d.length&&i(m+=1,!1,!0,!0)},O.previous=function(){m>0&&i(m-=1,!1,!0,!0)},O.instantNext=function(){m<d.length&&i(m+=1,!0,!0,!0)},O.instantPrevious=function(){m>0&&i(m-=1,!0,!0,!0)},O.destroy=function(){if(!N)return!1;z.setHeights&&e(z.section).each(function(){e(this).css("height","auto")}),S.off("resize",l.handleResize),z.scrollbars&&(S.off("mousedown",u.handleMousedown),S.off("mouseup",u.handleMouseup),S.off("scroll",u.handleScroll)),S.off(L,u.wheelHandler),S.off("keydown",u.keyHandler),o.addEventListener&&z.touchScroll&&(o.removeEventListener("touchstart",h.touchHandler,!1),o.removeEventListener("touchmove",h.touchHandler,!1),o.removeEventListener("touchend",h.touchHandler,!1)),f=[],d=[],p=[],g=[]},O.update=function(){if(!N)return!1;l.handleUpdate()},O.current=function(){return p[m]},O.disable=function(){x=!0},O.enable=function(){x=!1,N&&u.calculateNearest(!1,!1)},O.isDisabled=function(){return x},O.setOptions=function(o){if(!N)return!1;"object"==typeof o?(z=e.extend(z,o),l.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object.")},e.scrollify=O,O});